---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

// ambil semua kursus dari src/content/courses
const courses = await getCollection("courses");
// kalau mau urutkan, contoh: terbaru di atas (berdasar judul)
const list = courses.sort((a, b) => a.data.title.localeCompare(b.data.title));
---

<BaseLayout title="Muhayat Techlabs" description="Website pribadi dosen: materi kuliah, artikel, dan pengumuman.">
  <!-- ========================= HERO ========================= -->
  <section class="py-10 md:py-14">
    <div class="mx-auto max-w-6xl px-4 sm:px-6 grid gap-8 md:grid-cols-2 md:items-center">
      <div>
        <p class="uppercase tracking-wide text-sm font-semibold text-[var(--brand)]">
          Website Development & Teaching
        </p>
        <h1 class="mt-2 text-4xl md:text-5xl font-extrabold leading-tight">
          Welcome <span class="text-[var(--brand)]"></span> to
          <span class="text-[var(--brand)]">Muhayat</span> Techlabs
        </h1>
        <p class="mt-4 text-gray-600">
          Repository materi kuliah, artikel, dan pengumuman. Cepat, aman, SEO-friendly.
        </p>

        <div class="mt-6 flex flex-wrap gap-3">
          <a href="/#courses"
             class="inline-flex items-center px-4 py-2 rounded-lg bg-[var(--brand)] text-white hover:bg-[var(--brand-700)]">
            Lihat Courses
          </a>
          <a href="/articles"
             class="inline-flex items-center px-4 py-2 rounded-lg border border-[var(--brand)] text-[var(--brand)]
                    hover:bg-[var(--brand-600)] hover:text-white">
            Artikel Terbaru
          </a>
        </div>
      </div>

      <div class="order-first md:order-none">
        <!-- gambar hero opsional; aman dihapus bila tidak dipakai -->
        <img src="/hero.jpg" alt="" class="w-full rounded-3xl shadow-xl ring-1 ring-gray-200/70 object-cover" />
      </div>
    </div>
  </section>

  <!-- ========================= COURSES ========================= -->
  <section id="courses" class="py-10 md:py-14 bg-gradient-to-b from-emerald-50/40 to-transparent">
    <div class="mx-auto max-w-6xl px-4 sm:px-6">
      <h2 class="text-2xl md:text-3xl font-extrabold tracking-tight text-gray-900">Courses</h2>

      <div class="mt-6 grid gap-6 md:grid-cols-2">
        {list.map((c) => (
          <a href={`/courses/${c.slug}/`}
             class="block rounded-2xl ring-1 ring-gray-200/70 bg-white p-5 hover:shadow-lg transition">
            <h3 class="text-lg font-semibold text-[var(--brand)]">{c.data.title}</h3>
            {c.data.code && <p class="text-xs text-gray-500 mt-1">{c.data.code}</p>}
            {c.data.description && (
              <p class="text-sm text-gray-600 mt-2 line-clamp-3">{c.data.description}</p>
            )}
            <span class="mt-4 inline-flex items-center gap-1 text-sm text-[var(--brand)]">
              Buka materi
              <svg viewBox="0 0 20 20" class="h-4 w-4"><path d="M7 5l5 5-5 5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            </span>
          </a>
        ))}
      </div>
    </div>
  </section>
</BaseLayout>
