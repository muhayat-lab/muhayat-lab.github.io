---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

// Ambil koleksi 'courses' (sesuaikan jika nama koleksi Anda berbeda)
let courses = await getCollection("courses");

// Sembunyikan yang tidak dipublish & urutkan (opsional)
courses = courses
  .filter((c) => c.data.published !== false)
  .sort((a, b) => (a.data.title || "").localeCompare(b.data.title || ""));
---

<BaseLayout title="Courses â€” Muhayat Techlabs" description="Daftar mata kuliah di Muhayat Techlabs.">
  <section class="max-w-6xl mx-auto px-4 sm:px-6 py-10">
    <h1 class="text-3xl md:text-4xl font-extrabold mb-6">Courses</h1>

    {courses.length === 0 ? (
      <p class="text-gray-600">Belum ada course yang dipublikasikan.</p>
    ) : (
      <div class="grid md:grid-cols-2 gap-6">
        {courses.map((c) => (
          <a
            href={`/courses/${c.slug}/`}
            class="block rounded-xl border border-gray-200 bg-white p-6 hover:shadow-md transition"
          >
            <h2 class="text-xl font-semibold">{c.data.title}</h2>
            {c.data.code && <p class="text-xs mt-1 text-gray-500">{c.data.code}</p>}
            {c.data.description && (
              <p class="mt-3 text-gray-600 line-clamp-4">{c.data.description}</p>
            )}
            <span class="inline-flex items-center gap-1 mt-4 text-[var(--brand)]">
              Buka materi
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4">
                <path fill-rule="evenodd" d="M4.5 12a.75.75 0 0 1 .75-.75h11.69l-3.72-3.72a.75.75 0 1 1 1.06-1.06l5 5a.75.75 0 0 1 0 1.06l-5 5a.75.75 0 0 1-1.06-1.06l3.72-3.72H5.25A.75.75 0 0 1 4.5 12Z" clip-rule="evenodd" />
              </svg>
            </span>
          </a>
        ))}
      </div>
    )}
  </section>
</BaseLayout>
