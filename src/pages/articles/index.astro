---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("posts"))
  .sort((a, b) => (b.data.date ?? 0) - (a.data.date ?? 0)); // terbaru di atas
---

<BaseLayout title="Articles — Muhayat Techlabs">
  <section class="py-10 md:py-14">
    <div class="mx-auto max-w-6xl px-4 sm:px-6">
      <h1 class="text-2xl md:text-3xl font-extrabold tracking-tight">Articles</h1>
      <p class="mt-2 text-gray-600">A collection of articles, insights, and lessons I’ve discovered both in the classroom and the digital world. Written to share, not merely to teach.</p>

      <div class="mt-6 grid gap-6">
        {posts.map((p) => (
          <a href={`/articles/${p.slug}/`}
             class="block rounded-2xl ring-1 ring-gray-200/70 bg-white p-5 hover:shadow-lg transition">
            <h2 class="text-lg font-semibold text-[var(--brand)]">{p.data.title}</h2>
            {p.data.date && <p class="text-xs text-gray-500 mt-1">{new Date(p.data.date).toLocaleDateString("id-ID")}</p>}
            {p.data.summary && <p class="text-sm text-gray-600 mt-2 line-clamp-3">{p.data.summary}</p>}
            <span class="mt-3 inline-flex items-center gap-1 text-sm text-[var(--brand)]">
              Baca selengkapnya
              <svg viewBox="0 0 20 20" class="h-4 w-4"><path d="M7 5l5 5-5 5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            </span>
          </a>
        ))}
      </div>
    </div>
  </section>
</BaseLayout>
