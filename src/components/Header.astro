---
const links = [
  { href: "/", label: "Home" },
  { href: "/courses", label: "Courses" },
  { href: "/articles", label: "Articles" },
  { href: "/search", label: "Search" },
  { href: "/about", label: "About" },
];
---

<header class="sticky top-0 z-50">
  <!-- Bar gradien -->
  <div class="bg-gradient-to-r from-[var(--brand)] to-black text-white">
    <div class="mx-auto flex max-w-6xl items-center justify-between px-4 sm:px-6 py-3">
      <!-- Logo + judul -->
      <a href="/" class="flex items-center gap-3">
        <img src="/muhayat.png" alt="Logo" class="h-9 w-9 rounded-full ring-2 ring-white/40" />
        <span class="font-bold tracking-wide">
          <span class="text-white">Muhayat</span> <span class="text-white/90">Techlabs</span>
        </span>
      </a>

      <!-- Nav desktop -->
      <nav class="hidden md:block">
        <ul class="flex items-center gap-6 text-white/90">
          {links.map(link => (
            <li><a href={link.href} class="hover:text-white">{link.label}</a></li>
          ))}
        </ul>
      </nav>

      <!-- Tombol hamburger -->
      <button
        id="menuBtn"
        class="md:hidden inline-flex items-center justify-center h-10 w-10 rounded-md hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white/40"
        aria-controls="mobileNav"
        aria-expanded="false"
        aria-label="Open menu"
        type="button"
      >
        <!-- ikon hamburger -->
        <svg class="h-6 w-6 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 7h16M4 12h16M4 17h16" />
        </svg>
      </button>
    </div>
  </div>

  <!-- backdrop -->
  <div id="backdrop" class="fixed inset-0 bg-black/40 hidden md:hidden"></div>

  <!-- Drawer -->
  <aside
    id="mobileNav"
    class="fixed top-0 right-0 h-dvh w-[88%] max-w-xs translate-x-full md:hidden
           bg-white shadow-2xl transition-transform duration-300 z-[60] flex flex-col"
    aria-hidden="true"
  >
    <div class="flex items-center justify-between px-4 py-3 border-b">
      <div class="flex items-center gap-3">
        <img src="/muhayat.png" alt="Logo" class="h-9 w-9 rounded-full ring-2 ring-[var(--brand)]/30" />
        <span class="font-semibold text-[var(--brand)]">Muhayat Techlabs</span>
      </div>
      <button id="closeNav" class="h-9 w-9 rounded-md hover:bg-black/5 flex items-center justify-center" aria-label="Close menu" type="button">
        <svg class="h-6 w-6 text-black/70" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 6l12 12M18 6l-12 12" />
        </svg>
      </button>
    </div>

    <nav class="p-4">
      <ul class="space-y-3 text-[15px]">
        {links.map(link => (
          <li>
            <a href={link.href} class="block rounded-md px-3 py-2 hover:bg-black/5 text-gray-800">{link.label}</a>
          </li>
        ))}
      </ul>
    </nav>

    <div class="mt-auto px-4 pb-4 text-xs text-gray-500">
      Â© {new Date().getFullYear()} Muhayat Techlabs
    </div>
  </aside>

  <!-- Script toggle -->
  <script is:inline>
    (() => {
      const btn = document.getElementById('menuBtn');
      const nav = document.getElementById('mobileNav');
      const closeBtn = document.getElementById('closeNav');
      const backdrop = document.getElementById('backdrop');

      if (!btn || !nav) return;

      const open = () => {
        nav.classList.remove('translate-x-full');
        backdrop?.classList.remove('hidden');
        btn.setAttribute('aria-expanded', 'true');
        document.body.style.overflow = 'hidden';
      };

      const close = () => {
        nav.classList.add('translate-x-full');
        backdrop?.classList.add('hidden');
        btn.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
      };

      btn.addEventListener('click', open);
      closeBtn?.addEventListener('click', close);
      backdrop?.addEventListener('click', close);

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') close();
      });
    })();
  </script>
</header>
